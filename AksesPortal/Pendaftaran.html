<!DOCTYPE html>
<html lang="id">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formulir Pendaftaran :: Sistem Penerimaan Peserta Didik Baru</title>

    <!-- Bootstrap 4 CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css">

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <style>
        body {
            font-family: 'Inter', sans-serif;
            min-height: 100vh;
        }
    </style>
</head>

<body>

    <!-- NAVBAR -->
    <nav class="navbar navbar-expand-lg navbar-dark" style="background: linear-gradient(135deg, #3d5ce6 0%, #3f8cf0 100%);
            box-shadow: 0 8px 35px rgba(0, 0, 4, 0.5);
            position: relative;">
        <div class="container">
            <a class="navbar-brand d-flex align-items-center" href="HalamanUtama.html">
                <div class="bg-white rounded-circle d-flex align-items-center justify-content-center mr-2"
                    style="width: 40px; height: 40px;">
                    <i class="fas fa-graduation-cap text-primary"></i>
                </div>
                <div>
                    <span class="font-weight-bold d-block">School Payment App</span>
                    <small class="d-none d-md-block" style="font-size: 0.7rem; opacity: 0.9;">Sistem Penerimaan Peserta
                        Didik Baru</small>
                </div>
            </a>

            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#mainNav">
                <span class="navbar-toggler-icon"></span>
            </button>

            <div class="collapse navbar-collapse" id="mainNav">
                <ul class="navbar-nav ml-auto">
                    <li class="nav-item">
                        <a class="nav-link text-white" href="HalamanUtama.html">
                            <i class="fas fa-home mr-1"></i>Halaman Utama
                        </a>
                    </li>
                    <li class="nav-item active">
                        <a class="nav-link text-white" href="PusatInformasi.html">
                            <i class="fas fa-info-circle mr-1"></i>Pusat Informasi
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link text-white" href="Pendaftaran.html">
                            <i class="fas fa-edit mr-1"></i>Pendaftaran
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link text-white" href="Login.html">
                            <i class="fas fa-sign-in-alt mr-1"></i>Masuk Akun
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link text-white" href="KontakPanitia.html">
                            <i class="fas fa-address-book mr-1"></i>Kontak Panitia
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- MAIN CONTENT -->
    <div class="container my-5">
        <div class="row justify-content-center">
            <div class="col-lg-10">

                <!-- Alert Section -->
                <div id="alert-box" class="alert alert-dismissible fade show" role="alert" style="display: none;">
                    <div class="d-flex align-items-center">
                        <i id="alert-icon" class="fas fa-exclamation-circle fa-2x mr-3"></i>
                        <div class="flex-grow-1">
                            <h5 id="alert-title" class="alert-heading mb-1"></h5>
                            <p id="alert-content" class="mb-0"></p>
                        </div>
                    </div>
                    <button type="button" class="close" onclick="hideAlert()">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>

                <!-- Progress Steps -->
<div class="card border-0 shadow-lg mb-4" style="border-radius: 15px; overflow: hidden;">
  <div class="card-body p-4">
    <div class="row text-center align-items-center">
      
      <!-- Step 1 -->
      <div class="col-6 position-relative">
        <div id="step-indicator-1" class="rounded-circle bg-primary text-white d-inline-flex align-items-center justify-content-center font-weight-bold mb-2" 
             style="width: 60px; height: 60px; font-size: 24px;">1</div>
        
        <!-- Progress Line -->
        <div style="position: absolute; top: 50%; left: 50%; width: 100%; height: 4px; background: #007bff; z-index: -1;"></div>
        
        <h6 class="font-weight-bold mt-2">Biodata Peserta</h6>
        <small class="text-muted">Isi data diri lengkap</small>
      </div>

      <!-- Step 2 -->
      <div class="col-6 position-relative">
        <div id="step-indicator-2" class="rounded-circle bg-secondary text-white d-inline-flex align-items-center justify-content-center font-weight-bold mb-2" 
             style="width: 60px; height: 60px; font-size: 24px;">2</div>
        <h6 class="font-weight-bold text-muted mt-2">Konfirmasi</h6>
        <small class="text-muted">Verifikasi data</small>
      </div>

    </div>
  </div>
</div>


                <!-- Form Card - Step 1 -->
                <div id="card-registrar" class="card border-0 shadow-lg" style="border-radius: 15px; overflow: hidden;">
                    <div class="card-header bg-white border-0 p-4">
                        <h3 class="font-weight-bold mb-2">
                            <i class="fas fa-user-edit text-primary mr-2"></i>Biodata Peserta Didik
                        </h3>
                        <p class="text-muted mb-0">Silakan isi formulir di bawah ini dengan data yang benar dan lengkap
                        </p>
                    </div>

                    <div class="card-body p-4">
                        <form id="form-registrar">

                            <!-- Unit & Jenis Pendaftaran -->
                            <div class="row">
                                <div class="col-md-6 mb-4">
                                    <label class="font-weight-bold">Unit Pendidikan <span
                                            class="text-danger">*</span></label>
                                    <select name="unit" id="unit" class="form-control">
                                        <option value="">-- Pilih Unit --</option>
                                        <option value="SD">SD</option>
                                        <option value="SMP">SMP</option>
                                        <option value="SMA">SMA</option>
                                    </select>
                                    <small class="form-text text-muted">Pilih unit pendidikan yang tersedia</small>
                                    <small id="unit-feedback" class="text-danger d-none"></small>
                                </div>

                                <div class="col-md-6 mb-4">
                                    <label class="font-weight-bold">Jenis Pendaftaran <span
                                            class="text-danger">*</span></label>
                                    <select name="type" id="type" class="form-control">
                                        <option value="">-- Pilih Jenis --</option>
                                        <option value="DAFTAR BARU">Daftar Baru</option>
                                        <option value="PINDAHAN">Pindahan</option>
                                    </select>
                                    <small id="type-feedback" class="text-danger d-none"></small>
                                </div>
                            </div>

                            <hr class="my-4">

                            <!-- Data Pribadi -->
                            <h5 class="font-weight-bold mb-3">
                                <i class="fas fa-user text-primary mr-2"></i>Data Pribadi
                            </h5>

                            <div class="row">
                                <div class="col-md-12 mb-4">
                                    <label class="font-weight-bold">Nama Lengkap <span
                                            class="text-danger">*</span></label>
                                    <input type="text" name="fullname" id="fullname" class="form-control text-uppercase"
                                        maxlength="64" placeholder="Masukkan nama lengkap sesuai akta">
                                    <small id="fullname-feedback" class="text-danger d-none"></small>
                                </div>

                                <div class="col-md-6 mb-4">
                                    <label class="font-weight-bold">Jenis Kelamin <span
                                            class="text-danger">*</span></label>
                                    <div class="d-flex">
                                        <div class="custom-control custom-radio mr-4">
                                            <input type="radio" id="gender1" name="gender" class="custom-control-input"
                                                value="Laki-Laki" checked>
                                            <label class="custom-control-label" for="gender1">Laki-Laki</label>
                                        </div>
                                        <div class="custom-control custom-radio">
                                            <input type="radio" id="gender2" name="gender" class="custom-control-input"
                                                value="Perempuan">
                                            <label class="custom-control-label" for="gender2">Perempuan</label>
                                        </div>
                                    </div>
                                    <small id="gender-feedback" class="text-danger d-none"></small>
                                </div>

                                <div class="col-md-6 mb-4">
                                    <label class="font-weight-bold">Agama <span class="text-danger">*</span></label>
                                    <select name="religion" id="religion" class="form-control">
                                        <option value="">-- Pilih Agama --</option>
                                        <option value="Islam">Islam</option>
                                        <option value="Kristen Protestan">Kristen Protestan</option>
                                        <option value="Kristen Katolik">Kristen Katolik</option>
                                        <option value="Hindu">Hindu</option>
                                        <option value="Budha">Budha</option>
                                        <option value="Konghucu">Konghucu</option>
                                    </select>
                                    <small id="religion-feedback" class="text-danger d-none"></small>
                                </div>

                                <div class="col-md-6 mb-4">
                                    <label class="font-weight-bold">Tempat Lahir <span
                                            class="text-danger">*</span></label>
                                    <input type="text" name="place_ob" id="place-ob" class="form-control text-uppercase"
                                        maxlength="32" placeholder="Contoh: JAKARTA">
                                    <small id="place-ob-feedback" class="text-danger d-none"></small>
                                </div>

                                <div class="col-md-6 mb-4">
                                    <label class="font-weight-bold">Tanggal Lahir <span
                                            class="text-danger">*</span></label>
                                    <div class="row">
                                        <div class="col-4">
                                            <select name="date_ob" id="date-ob" class="form-control">
                                                <option value="">Tgl</option>
                                                <option value="01">01</option>
                                                <option value="02">02</option>
                                                <option value="03">03</option>
                                                <option value="04">04</option>
                                                <option value="05">05</option>
                                                <option value="06">06</option>
                                                <option value="07">07</option>
                                                <option value="08">08</option>
                                                <option value="09">09</option>
                                                <option value="10">10</option>
                                                <option value="11">11</option>
                                                <option value="12">12</option>
                                                <option value="13">13</option>
                                                <option value="14">14</option>
                                                <option value="15">15</option>
                                                <option value="16">16</option>
                                                <option value="17">17</option>
                                                <option value="18">18</option>
                                                <option value="19">19</option>
                                                <option value="20">20</option>
                                                <option value="21">21</option>
                                                <option value="22">22</option>
                                                <option value="23">23</option>
                                                <option value="24">24</option>
                                                <option value="25">25</option>
                                                <option value="26">26</option>
                                                <option value="27">27</option>
                                                <option value="28">28</option>
                                                <option value="29">29</option>
                                                <option value="30">30</option>
                                                <option value="31">31</option>
                                            </select>
                                            <small id="date-ob-feedback" class="text-danger d-none"></small>
                                        </div>
                                        <div class="col-4">
                                            <select name="month_ob" id="month-ob" class="form-control">
                                                <option value="">Bulan</option>
                                                <option value="01">Januari</option>
                                                <option value="02">Februari</option>
                                                <option value="03">Maret</option>
                                                <option value="04">April</option>
                                                <option value="05">Mei</option>
                                                <option value="06">Juni</option>
                                                <option value="07">Juli</option>
                                                <option value="08">Agustus</option>
                                                <option value="09">September</option>
                                                <option value="10">Oktober</option>
                                                <option value="11">November</option>
                                                <option value="12">Desember</option>
                                            </select>
                                            <small id="month-ob-feedback" class="text-danger d-none"></small>
                                        </div>
                                        <div class="col-4">
                                            <select name="year_ob" id="year-ob" class="form-control">
                                                <option value="">Tahun</option>
                                                <option value="2020">2020</option>
                                                <option value="2019">2019</option>
                                                <option value="2018">2018</option>
                                                <option value="2017">2017</option>
                                                <option value="2016">2016</option>
                                                <option value="2015">2015</option>
                                                <option value="2014">2014</option>
                                                <option value="2013">2013</option>
                                                <option value="2012">2012</option>
                                                <option value="2011">2011</option>
                                                <option value="2010">2010</option>
                                                <option value="2009">2009</option>
                                                <option value="2008">2008</option>
                                                <option value="2007">2007</option>
                                                <option value="2006">2006</option>
                                                <option value="2005">2005</option>
                                            </select>
                                            <small id="year-ob-feedback" class="text-danger d-none"></small>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <hr class="my-4">

                            <!-- Data Sekolah -->
                            <h5 class="font-weight-bold mb-3">
                                <i class="fas fa-school text-primary mr-2"></i>Data Sekolah Asal
                            </h5>

                            <div class="row">
                                <div class="col-md-8 mb-4">
                                    <label class="font-weight-bold">Nama Sekolah Asal <span
                                            class="text-danger">*</span></label>
                                    <input type="text" name="school_name" id="school-name"
                                        class="form-control text-uppercase" maxlength="64"
                                        placeholder="Contoh: SD NEGERI 01 JAKARTA">
                                    <small id="school-name-feedback" class="text-danger d-none"></small>
                                </div>

                                <div class="col-md-4 mb-4">
                                    <label class="font-weight-bold">Jenjang <span class="text-danger">*</span></label>
                                    <input type="text" name="school_level" id="school-level"
                                        class="form-control text-uppercase" maxlength="8" placeholder="Contoh: SD">
                                    <small id="school-level-feedback" class="text-danger d-none"></small>
                                </div>

                                <div class="col-md-12 mb-4">
                                    <label class="font-weight-bold">Alamat Tempat Tinggal <span
                                            class="text-danger">*</span></label>
                                    <textarea name="address" id="address" class="form-control text-uppercase" rows="3"
                                        maxlength="255" placeholder="Masukkan alamat lengkap"></textarea>
                                    <small id="address-feedback" class="text-danger d-none"></small>
                                </div>
                            </div>

                            <hr class="my-4">

                            <!-- Data Kontak & Akun -->
                            <h5 class="font-weight-bold mb-3">
                                <i class="fas fa-phone text-primary mr-2"></i>Data Kontak & Akun
                            </h5>

                            <div class="row">
                                <div class="col-md-12 mb-4">
                                    <label class="font-weight-bold">Nomor Telepon/WhatsApp <span
                                            class="text-danger">*</span></label>
                                    <div class="input-group">
                                        <div class="input-group-prepend">
                                            <span
                                                class="input-group-text bg-primary text-white font-weight-bold">+62</span>
                                        </div>
                                        <input type="text" name="phone" id="phone" class="form-control" maxlength="13"
                                            placeholder="8123456789">
                                    </div>
                                    <small class="form-text text-muted">Pastikan nomor aktif dan dapat dihubungi</small>
                                    <small id="phone-feedback" class="text-danger d-none"></small>
                                </div>

                                <div class="col-md-6 mb-4">
                                    <label class="font-weight-bold">Kata Sandi <span
                                            class="text-danger">*</span></label>
                                    <div class="input-group">
                                        <input type="password" name="new_password" id="new-password"
                                            class="form-control" maxlength="16" placeholder="Minimal 6 karakter">
                                        <div class="input-group-append">
                                            <button class="btn btn-outline-secondary" type="button"
                                                id="toggle-password">
                                                <i id="password-icon" class="fas fa-eye"></i>
                                            </button>
                                        </div>
                                    </div>
                                    <small id="new-password-feedback" class="text-danger d-none"></small>
                                </div>

                                <div class="col-md-6 mb-4">
                                    <label class="font-weight-bold">Konfirmasi Kata Sandi <span
                                            class="text-danger">*</span></label>
                                    <input type="password" name="re_password" id="re-password" class="form-control"
                                        maxlength="16" placeholder="Ulangi kata sandi">
                                    <small id="re-password-feedback" class="text-danger d-none"></small>
                                </div>
                            </div>
                            <div class="text-center mt-4 mb-4">
                                <button type="submit" id="btn-submit-registrar"
                                    class="btn btn-outline-primary w-100 py-2 shadow-sm" style="border-radius: 10px;">
                                    <span id="btn-icon-registrar"
                                        class="spinner-border spinner-border-sm mr-2 d-none"></span>
                                    <i id="btn-svg-registrar" class="fas fa-arrow-right mr-2"></i>
                                    <span id="btn-text-registrar">Lanjutkan ke Konfirmasi</span>
                                </button>
                            </div>
                        </form>
                    </div>
                </div>

                <!-- Confirmation Card - Step 2 -->
                <div id="card-confirmation" class="card border-0 shadow-lg d-none"
                    style="border-radius: 15px; overflow: hidden;">
                    <div class="card-header bg-white border-0 p-4">
                        <h3 class="font-weight-bold mb-2">
                            <i class="fas fa-check-circle text-success mr-2"></i>Konfirmasi Pendaftaran
                        </h3>
                        <p class="text-muted mb-0">Periksa kembali data yang telah Anda isi sebelum melakukan
                            pendaftaran</p>
                    </div>

                    <div class="card-body p-4">
                        <form id="form-confirmation">
                            <input type="hidden" name="admission_token" id="admission-token" value="">

                            <div class="card border-0 bg-light mb-4">
                                <div class="card-body p-4">
                                    <h5 class="font-weight-bold mb-4">Data Pendaftar</h5>

                                    <div class="row">
                                        <div class="col-md-6 mb-3">
                                            <small class="text-muted d-block">Unit Pendidikan</small>
                                            <h6 id="preview-unit" class="font-weight-bold">-</h6>
                                        </div>
                                        <div class="col-md-6 mb-3">
                                            <small class="text-muted d-block">Jenis Pendaftaran</small>
                                            <h6 id="preview-type" class="font-weight-bold">-</h6>
                                        </div>
                                        <div class="col-md-12 mb-3">
                                            <small class="text-muted d-block">Nama Lengkap</small>
                                            <h6 id="preview-fullname" class="font-weight-bold">-</h6>
                                        </div>
                                        <div class="col-md-6 mb-3">
                                            <small class="text-muted d-block">Jenis Kelamin</small>
                                            <h6 id="preview-gender" class="font-weight-bold">-</h6>
                                        </div>
                                        <div class="col-md-6 mb-3">
                                            <small class="text-muted d-block">Agama</small>
                                            <h6 id="preview-religion" class="font-weight-bold">-</h6>
                                        </div>
                                        <div class="col-md-6 mb-3">
                                            <small class="text-muted d-block">Tempat Lahir</small>
                                            <h6 id="preview-place-ob" class="font-weight-bold">-</h6>
                                        </div>
                                        <div class="col-md-6 mb-3">
                                            <small class="text-muted d-block">Tanggal Lahir</small>
                                            <h6 id="preview-date-ob" class="font-weight-bold">-</h6>
                                        </div>
                                        <div class="col-md-6 mb-3">
                                            <small class="text-muted d-block">Nama Sekolah Asal</small>
                                            <h6 id="preview-school-name" class="font-weight-bold">-</h6>
                                        </div>
                                        <div class="col-md-6 mb-3">
                                            <small class="text-muted d-block">Jenjang Sekolah</small>
                                            <h6 id="preview-school-level" class="font-weight-bold">-</h6>
                                        </div>
                                        <div class="col-md-6 mb-3">
                                            <small class="text-muted d-block">Alamat</small>
                                            <h6 id="preview-address" class="font-weight-bold">-</h6>
                                        </div>
                                        <div class="col-md-6 mb-3">
                                            <small class="text-muted d-block">Nomor Telepon</small>
                                            <h6 id="preview-phone" class="font-weight-bold">-</h6>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="d-flex justify-content-between mt-4">
                                <button type="button" class="btn btn-outline-secondary px-4 py-2" id="btn-back"
                                    style="border-width: 2px;">
                                    <i class="fas fa-arrow-left mr-2"></i>Kembali
                                </button>
                                <a href="Login.html">
                                    <button type="button" id="btn-submit-confirm"
                                        class="btn btn-outline-success px-5 py-2"
                                        style="border-width: 2px; background-color: #fff;">
                                        <span id="btn-icon-confirm"
                                            class="spinner-border spinner-border-sm mr-2 d-none"></span>
                                        <i id="btn-svg-confirm" class="fas fa-check-circle mr-2 text-success"></i>
                                        <span id="btn-text-confirm" class="text-success font-weight-semibold">Proses
                                            Pendaftaran</span>
                                    </button>
                                </a>
                            </div>
                        </form>
                    </div>
                </div>

            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.min.js"></script>

    <script>
        $(document).ready(function () {

            // Configuration
            const myConfig = {
                field: {
                    registrar: {
                        'unit': 'Unit pendidikan',
                        'type': 'Jenis pendaftaran',
                        'fullname': 'Nama lengkap',
                        'gender': 'Jenis kelamin',
                        'place-ob': 'Tempat lahir',
                        'date-ob': 'Tanggal lahir',
                        'month-ob': 'Bulan lahir',
                        'year-ob': 'Tahun lahir',
                        'religion': 'Agama',
                        'school-name': 'Nama sekolah asal',
                        'school-level': 'Jenjang sekolah asal',
                        'address': 'Alamat tempat tinggal',
                        'phone': 'Nomor telepon/whatsapp',
                        'new-password': 'Kata sandi login',
                        're-password': 'Konfirmasi kata sandi login'
                    }
                }
            };

            // Toggle password visibility
            $('#toggle-password').click(function () {
                const passwordField = $('#new-password');
                const icon = $('#password-icon');

                if (passwordField.attr('type') === 'password') {
                    passwordField.attr('type', 'text');
                    icon.removeClass('fa-eye').addClass('fa-eye-slash');
                } else {
                    passwordField.attr('type', 'password');
                    icon.removeClass('fa-eye-slash').addClass('fa-eye');
                }
            });

            // Only allow numbers for phone
            $('#phone').on('input', function () {
                this.value = this.value.replace(/[^0-9]/g, '');
            });

            // Password validation
            $('#new-password, #re-password').on('input keyup', function () {
                if ($('#re-password').val()) {
                    if ($('#new-password').val() !== $('#re-password').val()) {
                        $('#re-password').addClass('is-invalid border-danger');
                        $('#re-password-feedback').removeClass('d-none').text('Konfirmasi kata sandi tidak sesuai');
                        $('#btn-submit-registrar').prop('disabled', true);
                    } else {
                        $('#re-password').removeClass('is-invalid border-danger');
                        $('#re-password-feedback').addClass('d-none');
                        $('#btn-submit-registrar').prop('disabled', false);
                    }
                }
            });

            // Remove spaces from phone and password
            $('#phone, #new-password, #re-password').on({
                keydown: function (e) {
                    if (e.which === 32) {
                        return false;
                    }
                },
                change: function () {
                    this.value = this.value.replace(/\s/g, '');
                }
            });

            // Validate form function
            function validateForm(fieldId, fieldName) {
                const field = $('#' + fieldId);

                // Special handling for radio buttons (gender)
                if (fieldId === 'gender') {
                    const radioValue = $('input[name="gender"]:checked').val();
                    if (radioValue) {
                        return true;
                    } else {
                        $('#' + fieldId + '-feedback').removeClass('d-none').text(fieldName + ' wajib diisi');
                        return false;
                    }
                }

                // Regular field validation
                if (!field.val() || field.val() === '') {
                    field.addClass('is-invalid border-danger');
                    $('#' + fieldId + '-feedback').removeClass('d-none').text(fieldName + ' wajib diisi');
                    return false;
                } else {
                    field.removeClass('is-invalid border-danger');
                    $('#' + fieldId + '-feedback').addClass('d-none');
                    return true;
                }
            }

            // Submit button handler
            function submitButtonHandler(step) {
                const btn = $('#btn-submit-' + step);
                const icon = $('#btn-icon-' + step);
                const svg = $('#btn-svg-' + step);

                if (btn.is(':disabled')) {
                    btn.prop('disabled', false);
                    icon.addClass('d-none');
                    svg.removeClass('d-none');
                } else {
                    btn.prop('disabled', true);
                    svg.addClass('d-none');
                    icon.removeClass('d-none');
                }
            }

            // Show alert function
            function showAlert(message, type = 'warning') {
                const alertBox = $('#alert-box');
                const alertIcon = $('#alert-icon');
                const alertTitle = $('#alert-title');
                const alertContent = $('#alert-content');

                // Remove all alert classes
                alertBox.removeClass('alert-success alert-warning alert-danger alert-info');

                // Set alert type
                if (type === 'success') {
                    alertBox.addClass('alert-success');
                    alertIcon.removeClass().addClass('fas fa-check-circle fa-2x mr-3');
                    alertTitle.text('Berhasil!');
                } else if (type === 'warning') {
                    alertBox.addClass('alert-warning');
                    alertIcon.removeClass().addClass('fas fa-exclamation-triangle fa-2x mr-3');
                    alertTitle.text('Perhatian!');
                } else if (type === 'danger') {
                    alertBox.addClass('alert-danger');
                    alertIcon.removeClass().addClass('fas fa-times-circle fa-2x mr-3');
                    alertTitle.text('Error!');
                }

                alertContent.text(message);
                alertBox.fadeIn();

                // Auto hide after 5 seconds
                setTimeout(function () {
                    alertBox.fadeOut();
                }, 5000);
            }

            // Hide alert function
            window.hideAlert = function () {
                $('#alert-box').fadeOut();
            };

            // Form submission - Step 1
            $('#form-registrar').on('submit', function (e) {
                e.preventDefault();

                let errors = [];

                // Reset all feedback
                $('.is-invalid').removeClass('is-invalid border-danger');
                $('.text-danger').addClass('d-none');

                submitButtonHandler('registrar');

                // Validate all fields
                $.each(myConfig.field.registrar, function (fieldId, fieldName) {
                    errors.push(validateForm(fieldId, fieldName));
                });

                // Check if there are errors
                if ($.inArray(false, errors) !== -1) {
                    submitButtonHandler('registrar');
                    showAlert('Mohon lengkapi semua field yang wajib diisi', 'warning');

                    // Scroll to first invalid field
                    $('html, body').animate({
                        scrollTop: $('.is-invalid:first').offset().top - 100
                    }, 500);

                    return false;
                }

                // Simulate API call
                setTimeout(function () {
                    // Generate token
                    const token = 'TOKEN-' + Date.now();
                    $('#admission-token').val(token);

                    // Get form data
                    const formData = {
                        unit: $('#unit option:selected').text(),
                        type: $('#type').val(),
                        fullname: $('#fullname').val(),
                        gender: $('input[name="gender"]:checked').val(),
                        religion: $('#religion').val(),
                        'place-ob': $('#place-ob').val(),
                        'date-ob': $('#date-ob').val() + ' ' + $('#month-ob option:selected').text() + ' ' + $('#year-ob').val(),
                        'school-name': $('#school-name').val(),
                        'school-level': $('#school-level').val(),
                        address: $('#address').val(),
                        phone: '+62' + $('#phone').val()
                    };

                    // Update preview
                    $.each(formData, function (key, val) {
                        $('#preview-' + key).text(val);
                    });

                    // Show confirmation step
                    $('#card-registrar').addClass('d-none');
                    $('#card-confirmation').removeClass('d-none');

                    // Update step indicators
                    $('#step-indicator-1').removeClass('bg-primary').addClass('bg-success');
                    $('#step-indicator-2').removeClass('bg-secondary').addClass('bg-primary');

                    submitButtonHandler('registrar');

                    // Scroll to top
                    $('html, body').animate({ scrollTop: 0 }, 500);

                    showAlert('Data berhasil disimpan! Silakan periksa kembali data Anda.', 'success');

                }, 1500);
            });

            // Back button
            $('#btn-back').click(function () {
                $('#card-confirmation').addClass('d-none');
                $('#card-registrar').removeClass('d-none');

                // Update step indicators
                $('#step-indicator-1').removeClass('bg-success').addClass('bg-primary');
                $('#step-indicator-2').removeClass('bg-primary').addClass('bg-secondary');

                // Scroll to top
                $('html, body').animate({ scrollTop: 0 }, 500);
            });

            // Final submission
            $('#btn-submit-confirm').click(function () {
                submitButtonHandler('confirm');

                // Simulate final API call
                setTimeout(function () {
                    submitButtonHandler('confirm');

                    // Show success message
                    showAlert('Pendaftaran berhasil diproses! Silakan cek email untuk informasi lebih lanjut.', 'success');

                    // Reset form after 2 seconds
                    setTimeout(function () {
                        location.reload();
                    }, 3000);

                }, 2000);
            });

            // Auto-hide alerts
            setTimeout(function () {
                $('#alert-box').fadeOut();
            }, 5000);
        });
    </script>

</body>

</html>