<!doctype html>
<html lang="id">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <title>Detail Antrean :: School Payment App</title>

    <!-- Bootstrap 4 CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css">

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f5f5f5;
        }
    </style>
</head>

<body>

    <!-- NAVBAR -->
    <div id="navbar"></div>

    <!-- MAIN CONTENT -->
    <div class="container-fluid py-4">

        <!-- Breadcrumb -->
        <nav aria-label="breadcrumb" class="mb-3">
            <ol class="breadcrumb bg-white px-3 mb-2">
                <li class="breadcrumb-item"><a href="#" class="text-decoration-none">Beranda</a></li>
                <li class="breadcrumb-item"><a href="#" class="text-decoration-none">Lainnya</a></li>
                <li class="breadcrumb-item"><a href="MonitoringAntrean.html" class="text-decoration-none">Monitoring
                        Antrean</a></li>
                <li class="breadcrumb-item active">Detail Antrean</li>
            </ol>
        </nav>

        <!-- Page Header -->
        <div class="d-flex justify-content-between align-items-center mb-4">
            <div>
                <h2 class="font-weight-bold mb-1">Detail Antrean</h2>
                <p class="text-muted mb-0"><i class="fas fa-info-circle mr-1"></i>Detail informasi antrean proses</p>
            </div>
            <div class="d-flex justify-content-between align-items-center flex-wrap">
                <div class="mt-2 mt-md-0 d-flex">
                    <a href="MonitoringAntrian.html" class="btn btn-outline-primary mr-2">
                        <i class="fas fa-arrow-left mr-1"></i>Kembali
                    </a>
                    <button class="btn btn-info mr-2 change-status" data-id="1">
                        <i class="fas fa-exchange-alt mr-1"></i>Status
                    </button>
                    <button class="btn btn-success mr-2 queue-process" data-id="1">
                        <i class="fas fa-play-circle mr-1"></i>Proses
                    </button>
                    <button class="btn btn-danger delete" data-id="1">
                        <i class="fas fa-trash mr-1"></i>Hapus
                    </button>
                </div>
            </div>
        </div>

        <!-- Alert -->
        <div id="alert" class="alert alert-dismissible fade" role="alert"
            style="display: none; border-left: 4px solid #216fcb;">
            <div class="d-flex align-items-center">
                <div class="mr-3">
                    <i id="alert-icon" class="fas fa-info-circle fa-2x text-primary"></i>
                </div>
                <div class="flex-grow-1">
                    <h6 id="alert-title" class="alert-heading font-weight-bold mb-1">Notifikasi</h6>
                    <div id="alert-content" class="mb-0"></div>
                </div>
            </div>
            <button type="button" class="close" onclick="hideAlert()">
                <span>&times;</span>
            </button>
        </div>

        <!-- Main Content Row -->
        <div class="row">
            <!-- Queue Info Card -->
            <div class="col-12 col-md-4 col-lg-3 mb-3">
                <div class="card shadow" style="border-radius: 12px;">
                    <div class="card-body text-center mt-2">
                        <div class="mb-3">
                            <div class="bg-primary rounded-circle d-inline-flex align-items-center justify-content-center"
                                style="width: 100px; height: 100px;">
                                <i class="fas fa-tasks fa-3x text-white"></i>
                            </div>
                        </div>

                        <div class="border-bottom pb-3 mb-3">
                            <small class="text-muted d-block mb-1">ID Antrean</small>
                            <span class="font-weight-bold">#1846</span>
                        </div>

                        <div class="border-bottom pb-3 mb-3">
                            <small class="text-muted d-block mb-1">Nama Antrean</small>
                            <span class="h6 mb-0">Kirim Notifikasi Pembayaran</span>
                        </div>

                        <div class="border-bottom pb-3 mb-3">
                            <small class="text-muted d-block mb-1">Status Antrean</small>
                            <span class="badge px-3 py-2"
                                style="background:#e6f6e7; color:#2a7237; border-radius:25px; font-weight:550; font-size:13px;">
                                <i class="fas fa-check-circle mr-1"></i>Aktif
                            </span>
                        </div>

                        <div class="border-bottom pb-3 mb-3">
                            <small class="text-muted d-block mb-1">Status Proses</small>
                            <span class="badge px-3 py-2"
                                style="background:#fff3e0; color:#e65100; border-radius:25px; font-weight:550; font-size:13px;">
                                <i class="fas fa-clock mr-1"></i>Belum Diproses
                            </span>
                        </div>

                        <div class="pb-3 mb-3">
                            <small class="text-muted d-block mb-1">Waktu Antrean</small>
                            <span class="text-dark mb-0">25 Nov 2025, 11:42</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Queue Detail Card -->
            <div class="col-12 col-md-8 col-lg-9 mb-3">
                <div class="card shadow-lg border-0" style="border-radius: 12px;">
                    <div class="card-header bg-white border-bottom"
                        style="border-top-left-radius: 12px; border-top-right-radius: 12px;">
                        <h5 class="mb-0 text-secondary">
                            <i class="fas fa-file-alt text-primary mr-2"></i>Detail Antrean Proses
                        </h5>
                    </div>

                    <div class="card-body p-3">
                        <!-- Inner Box - Informasi Antrean -->
                        <div class="border rounded mb-4" style="border-radius: 10px !important;">
                            <div class="bg-light px-3 py-2 border-bottom" style="border-radius: 10px 10px 0 0;">
                                <span class="text-muted"><i class="fas fa-info-circle mr-2"></i>Informasi Antrean</span>
                            </div>
                            <div class="p-0">
                                <table class="table table-bordered mb-0">
                                    <tbody>
                                        <tr>
                                            <td class="bg-light text-muted" style="width: 20%;">ID Antrean</td>
                                            <td class="align-middle">
                                                <span class="font-weight-bold">#1846</span>
                                            </td>
                                            <td class="bg-light text-muted" style="width: 20%;">Nama Antrean</td>
                                            <td style="width: 30%;">
                                                <span class="h6 mb-0">Kirim Notifikasi Pembayaran</span>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td class="bg-light text-muted">Waktu Antrean</td>
                                            <td>
                                                <i class="far fa-calendar-alt mr-1 text-muted"></i>25 November 2025
                                                <span class="ml-2"><i
                                                        class="far fa-clock mr-1 text-muted"></i>11:42</span>
                                            </td>
                                            <td class="bg-light text-muted">Status Antrean</td>
                                            <td>
                                                <span class="badge px-3 py-2"
                                                    style="background:#e6f6e7; color:#2a7237; border-radius:8px;">
                                                    <i class="fas fa-check-circle mr-1"></i>Aktif
                                                </span>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>

                        <!-- Inner Box - Status Proses -->
                        <div class="border rounded mb-4" style="border-radius: 10px !important;">
                            <div class="bg-light px-3 py-2 border-bottom" style="border-radius: 10px 10px 0 0;">
                                <span class="text-muted"><i class="fas fa-check-double mr-2"></i>Status Proses</span>
                            </div>
                            <div class="p-0">
                                <table class="table table-bordered mb-0">
                                    <tbody>
                                        <tr>
                                            <td class="bg-light text-muted" style="width: 20%;">Status Proses</td>
                                            <td style="width: 30%;">
                                                <span class="badge px-3 py-2"
                                                    style="background:#fff3e0; color:#e65100; border-radius:8px;">
                                                    <i class="fas fa-clock mr-1"></i>Belum Diproses
                                                </span>
                                            </td>
                                            <td class="bg-light text-muted" style="width: 20%;">Waktu Proses</td>
                                            <td style="width: 30%;">
                                                <span class="text-muted">-</span>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td class="bg-light text-muted">Diproses Oleh</td>
                                            <td colspan="3">
                                                <span class="text-muted">-</span>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>

                        <!-- Inner Box - Data Antrean -->
                        <div class="border rounded mb-4" style="border-radius: 10px !important;">
                            <div class="bg-light px-3 py-2 border-bottom" style="border-radius: 10px 10px 0 0;">
                                <span class="text-muted"><i class="fas fa-database mr-2"></i>Data Antrean</span>
                            </div>
                            <div class="p-3">
                                <div class="d-flex justify-content-between align-items-center mb-2">
                                    <span class="text-muted">Payload Data</span>
                                    <button class="btn btn-sm btn-outline-secondary" data-toggle="modal"
                                        data-target="#queueDataModal">
                                        <i class="fas fa-eye mr-1"></i>Lihat Data
                                    </button>
                                </div>
                                <small class="text-muted">Klik tombol "Lihat Data" untuk melihat detail payload
                                    antrean</small>
                            </div>
                        </div>


                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Queue Data -->
    <div class="modal fade" id="queueDataModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-lg modal-dialog-centered modal-dialog-scrollable">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">
                        <i class="fas fa-database text-primary mr-2"></i>Data Antrean
                    </h5>
                    <button type="button" class="close" data-dismiss="modal">
                        <span>&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <pre class="bg-light p-3 rounded"
                        style="max-height: 400px; overflow-y: auto;">a:3:{s:9:&quot;transport&quot;;s:6:&quot;wa-api&quot;;s:6:&quot;number&quot;;s:13:&quot;6289670051825&quot;;s:7:&quot;message&quot;;s:519:&quot;Kepada\n*Septiana*,\n
Saat ini anda memiliki invoice baru dengan nomor *#25118627* dengan detail sebagai berikut :\n
Nomor Induk\n*250601001*\n
Kelas Sekarang\n*10 B*\n
Rincian Pembayaran\n*Setoran Tabungan 10,000*\n
Total Pembayaran\n*Rp 10,000*\n
Metode Pembayaran\n*QRIS*\n\nNomor Pembayaran\n*-*\n\nSilahkan melakukan pembayaran melalui metode dan nomor pembayaran yang tertera.\n
Terima kasih.\n
_Anda menerima pesan otomatis ini karena nomor anda terdaftar pada sistem pembayaran SMK Digital Nusantara._\n&quot;;}</pre>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Tutup</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Response Data -->
    <div class="modal fade" id="responseDataModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-lg modal-dialog-centered modal-dialog-scrollable">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">
                        <i class="fas fa-reply text-success mr-2"></i>Data Respon
                    </h5>
                    <button type="button" class="close" data-dismiss="modal">
                        <span>&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="alert alert-info" role="alert">
                        <i class="fas fa-info-circle mr-2"></i>
                        Data respon akan muncul setelah antrean berhasil diproses
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Tutup</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Change Status -->
    <div class="modal fade" id="status-dialog" tabindex="-1" aria-hidden="true" data-backdrop="static">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">
                        <i class="fas fa-exchange-alt text-info mr-2"></i>Ubah Status Antrean
                    </h5>
                    <button type="button" class="close" data-dismiss="modal">
                        <span>&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="form-group">
                        <label class="font-weight-bold">Status Antrean <span class="text-danger">*</span></label>
                        <select id="queue-status" class="form-control">
                            <option value="">Pilih Status</option>
                            <option value="Aktif">Aktif</option>
                            <option value="Non-Aktif">Non-Aktif</option>
                        </select>
                        <small id="queue-status-feedback" class="text-danger" style="display: none;">Status antrean
                            diperlukan</small>
                    </div>
                    <div class="form-group mb-0">
                        <label class="font-weight-bold">Status Proses</label>
                        <select id="process-status-modal" class="form-control">
                            <option value="">Pilih Status</option>
                            <option value="Sukses">Sukses</option>
                            <option value="Gagal">Gagal</option>
                            <option value="Belum Diproses">Belum Diproses</option>
                        </select>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" id="btn-status-abort" class="btn btn-secondary"
                        data-dismiss="modal">Batalkan</button>
                    <button type="button" id="btn-status-submit" class="btn btn-primary">
                        <i id="btn-status-svg" class="fas fa-check-circle mr-1"></i>
                        <span id="btn-status-icon" class="spinner-border spinner-border-sm mr-2"
                            style="display: none;"></span>
                        Konfirmasi
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Process Queue -->
    <div class="modal fade" id="process-dialog" tabindex="-1" aria-hidden="true" data-backdrop="static">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">
                        <i class="fas fa-play-circle text-success mr-2"></i>Proses Antrean
                    </h5>
                    <button type="button" class="close" data-dismiss="modal">
                        <span>&times;</span>
                    </button>
                </div>
                <div class="modal-body text-center">
                    <i class="fas fa-question-circle fa-3x text-info mb-3"></i>
                    <p class="mb-2">Apakah yakin akan memproses antrean ini?</p>
                    <p class="text-muted mb-0">Pastikan status antrean adalah aktif dan status proses belum diproses.
                    </p>
                </div>
                <div class="modal-footer">
                    <button type="button" id="btn-process-abort" class="btn btn-secondary"
                        data-dismiss="modal">Batalkan</button>
                    <button type="button" id="btn-process-submit" class="btn btn-success">
                        <i id="btn-process-svg" class="fas fa-check-circle mr-1"></i>
                        <span id="btn-process-icon" class="spinner-border spinner-border-sm mr-2"
                            style="display: none;"></span>
                        Konfirmasi
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Delete -->
    <div class="modal fade" id="delete-dialog" tabindex="-1" aria-hidden="true" data-backdrop="static">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Konfirmasi Penghapusan</h5>
                    <button type="button" class="close" data-dismiss="modal">
                        <span>&times;</span>
                    </button>
                </div>
                <div class="modal-body text-center">
                    <i class="fas fa-exclamation-triangle fa-3x text-danger mb-3"></i>
                    <p class="mb-2">Apakah yakin akan menghapus antrean ini?</p>
                    <p class="text-muted mb-0">Data yang telah dihapus tidak dapat dikembalikan.</p>
                </div>
                <div class="modal-footer">
                    <button type="button" id="btn-delete-abort" class="btn btn-secondary"
                        data-dismiss="modal">Batalkan</button>
                    <button type="button" id="btn-delete-submit" class="btn btn-danger">
                        <i id="btn-delete-svg" class="fas fa-check-circle mr-1"></i>
                        <span id="btn-delete-icon" class="spinner-border spinner-border-sm mr-2"
                            style="display: none;"></span>
                        Konfirmasi
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="bg-white py-3 mt-5">
        <div class="container-fluid">
            <div class="row">
                <div class="col-12 text-center">
                    <p class="mb-0 text-muted">Powered By School Payment App &copy; 2022-2025</p>
                </div>
            </div>
        </div>
    </footer>

    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <!-- Popper.js -->
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.min.js"></script>

    <script>
        fetch("../../Navbar/navbar.html")
            .then(res => res.text())
            .then(html => {
                const navbar = document.getElementById("navbar");
                navbar.innerHTML = html;

                // Menjalankan ulang semua script yang ada di navbar.html
                navbar.querySelectorAll("script").forEach(oldScript => {
                    const newScript = document.createElement("script");
                    if (oldScript.src) {
                        newScript.src = oldScript.src;
                    } else {
                        newScript.innerHTML = oldScript.innerHTML;
                    }
                    document.body.appendChild(newScript);
                });

                // PANGGIL FUNGSI ACTIVE STATE SETELAH NAVBAR LOADED
                // Tunggu 200ms untuk memastikan semua script navbar selesai
                setTimeout(function () {
                    setActiveNavbar();
                }, 200);
            });

        /**
         * detail-antrean.js
         * Interaksi JS untuk halaman Detail Antrean (Bootstrap 4 + jQuery)
         * Pastikan file ini dimuat setelah jQuery & Bootstrap JS.
         */

        /* -------------------------
           Utility: Alert kecil di page
           ------------------------- */
        function showAlert(type, title, message, autoHide = true, duration = 4000) {
            const $alert = $('#alert');
            const $icon = $('#alert-icon');
            const $title = $('#alert-title');
            const $content = $('#alert-content');

            // reset classes & icon
            $alert.removeClass('alert-success alert-danger alert-info alert-warning show');
            $icon.removeClass('text-primary text-success text-danger text-warning');

            if (type === 'success') {
                $alert.addClass('alert-success');
                $icon.addClass('fas fa-check-circle text-success');
            } else if (type === 'danger') {
                $alert.addClass('alert-danger');
                $icon.addClass('fas fa-exclamation-circle text-danger');
            } else if (type === 'warning') {
                $alert.addClass('alert-warning');
                $icon.addClass('fas fa-exclamation-triangle text-warning');
            } else {
                $alert.addClass('alert-info');
                $icon.addClass('fas fa-info-circle text-primary');
            }

            $title.text(title);
            $content.html(message);

            $alert.show().addClass('show');

            if (autoHide) {
                setTimeout(hideAlert, duration);
            }
        }
        function hideAlert() {
            $('#alert').removeClass('show').hide();
        }

        /* -------------------------
           Loading utils for buttons
           ------------------------- */
        function setBtnLoading($btn, loading = true) {
            const $spinner = $btn.find('.spinner-border');
            const $svgIcon = $btn.find('i.fas').first();

            if (loading) {
                $svgIcon.hide();
                $spinner.show();
                $btn.prop('disabled', true);
            } else {
                $svgIcon.show();
                $spinner.hide();
                $btn.prop('disabled', false);
            }
        }

        /* -------------------------
           Event handlers
           ------------------------- */
        $(document).ready(function () {

            // -- Open "Ubah Status" modal --
            $(document).on('click', '.change-status', function () {
                const id = $(this).data('id');
                // (bisa dipakai untuk fetch data via AJAX jika perlu)
                $('#queue-status').val(''); // reset
                $('#process-status-modal').val('');
                $('#queue-status-feedback').hide();
                $('#status-dialog').modal('show');
            });

            // -- Confirm status submit --
            $('#btn-status-submit').on('click', function () {
                const $btn = $(this);
                const newStatus = $('#queue-status').val();
                const newProcessStatus = $('#process-status-modal').val();

                if (!newStatus) {
                    $('#queue-status-feedback').show();
                    return;
                } else {
                    $('#queue-status-feedback').hide();
                }

                setBtnLoading($btn, true);

                // Simulasi AJAX -> ganti dengan AJAX nyata ke backend jika tersedia
                setTimeout(function () {
                    setBtnLoading($btn, false);
                    $('#status-dialog').modal('hide');

                    // Update tampilan status pada halaman (badge di kiri)
                    const $statusBadges = $('span.badge').filter(function () {
                        // cari badge yang berisi ikon check-circle atau clock (sederhana)
                        return $(this).text().trim().toLowerCase().includes('aktif') ||
                            $(this).text().trim().toLowerCase().includes('belum diproses') ||
                            $(this).text().trim().toLowerCase().includes('sukses') ||
                            $(this).text().trim().toLowerCase().includes('gagal');
                    });

                    // Update specific places (ID Antrean & Status Proses di halaman)
                    // Lebih deterministik: update cell yang spesifik di tabel
                    // Update Status Antrean (kiri card & table)
                    $('.card-body .border-bottom').each(function () {
                        // nothing - keep safe. We'll update by selecting cells
                    });

                    // Update the left "Status Antrean" badge
                    const $leftStatusBadge = $('.col-12.col-md-4').find('span.badge').first();
                    if (newStatus.toLowerCase() === 'aktif') {
                        $leftStatusBadge.css({ 'background': '#e6f6e7', 'color': '#2a7237' }).html('<i class="fas fa-check-circle mr-1"></i>Aktif');
                    } else {
                        $leftStatusBadge.css({ 'background': '#f5f5f7', 'color': '#6c757d' }).html('<i class="fas fa-times-circle mr-1"></i>Non-Aktif');
                    }

                    // Update "Status Proses" in the details table and card
                    const $processBadge = $('td').find('span.badge').filter(function () {
                        return $(this).text().trim().toLowerCase().includes('belum diproses') ||
                            $(this).text().trim().toLowerCase().includes('sukses') ||
                            $(this).text().trim().toLowerCase().includes('gagal');
                    }).first();

                    if (newProcessStatus) {
                        if (newProcessStatus.toLowerCase() === 'sukses') {
                            $processBadge.css({ 'background': '#e6f6e7', 'color': '#2a7237' }).html('<i class="fas fa-check-circle mr-1"></i>Sukses');
                        } else if (newProcessStatus.toLowerCase() === 'gagal') {
                            $processBadge.css({ 'background': '#fdecea', 'color': '#b71c1c' }).html('<i class="fas fa-times-circle mr-1"></i>Gagal');
                        } else {
                            $processBadge.css({ 'background': '#fff3e0', 'color': '#e65100' }).html('<i class="fas fa-clock mr-1"></i>Belum Diproses');
                        }
                    }

                    showAlert('success', 'Berhasil', 'Status antrean berhasil diperbarui.');
                }, 900);
            });

            // -- Open "Proses Antrean" modal --
            $(document).on('click', '.queue-process', function () {
                $('#process-dialog').modal('show');
            });

            // -- Confirm process submit --
            $('#btn-process-submit').on('click', function () {
                const $btn = $(this);
                setBtnLoading($btn, true);

                // Simulasi proses (AJAX)
                setTimeout(function () {
                    setBtnLoading($btn, false);
                    $('#process-dialog').modal('hide');

                    // Update proses status -> Sukses & isi waktu proses
                    const $processBadge = $('table').find('span.badge').filter(function () {
                        return $(this).text().trim().toLowerCase().includes('belum diproses') ||
                            $(this).text().trim().toLowerCase().includes('sukses') ||
                            $(this).text().trim().toLowerCase().includes('gagal');
                    }).first();

                    $processBadge.css({ 'background': '#e6f6e7', 'color': '#2a7237' }).html('<i class="fas fa-check-circle mr-1"></i>Sukses');

                    // update Waktu Proses cell (cari cell dengan text '-' yang ada di baris Waktu Proses)
                    $('td').filter(function () {
                        return $(this).text().trim() === '-';
                    }).first().text(new Date().toLocaleString('id-ID', {
                        day: '2-digit', month: 'long', year: 'numeric', hour: '2-digit', minute: '2-digit'
                    }));

                    // Show response modal (simulasi)
                    $('#responseDataModal').modal('show');

                    showAlert('success', 'Proses Selesai', 'Antrean telah diproses dan respon tersimpan.');
                }, 1200);
            });

            // -- Open "Delete" modal --
            $(document).on('click', '.delete', function () {
                $('#delete-dialog').modal('show');
            });

            // -- Confirm delete submit --
            $('#btn-delete-submit').on('click', function () {
                const $btn = $(this);
                setBtnLoading($btn, true);

                // Simulasi hapus
                setTimeout(function () {
                    setBtnLoading($btn, false);
                    $('#delete-dialog').modal('hide');

                    // Option: redirect kembali ke list setelah penghapusan
                    // Karena ini contoh statis, kita hanya tampilkan alert & sembunyikan konten
                    $('.card').fadeOut(300);
                    showAlert('success', 'Terhapus', 'Data antrean berhasil dihapus. Mengarahkan ke halaman daftar...');

                    // jika ingin redirect: window.location.href = 'MonitoringAntrian.html';
                }, 900);
            });

            // -- Tampilkan isi payload (modal sudah dipicu via data-toggle di HTML) --
            // Tidak perlu JS khusus karena HTML menggunakan data-toggle="modal"

            // -- Tutup alert ketika tombol close diklik (sudah ada inline onclick pada HTML) --
        });
    </script>


</body>

</html>